# LLM-Learn ä¼ä¸šçº§é¡¹ç›®æ¡†æ¶ä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿æ‚¨çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š
- Python 3.8+
- PostgreSQL 12+
- Redis 6+
- Git

### 2. å…‹éš†é¡¹ç›®

```bash
git clone <your-repository-url>
cd LLM-learn
```

### 3. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

```bash
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# æˆ–
.venv\Scripts\activate     # Windows
```

### 4. å®‰è£…ä¾èµ–

```bash
pip install -e ".[dev]"
```

### 5. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®æ•°æ®åº“è¿æ¥ç­‰ä¿¡æ¯
```

### 6. å¯åŠ¨æœåŠ¡

ä½¿ç”¨æä¾›çš„å¯åŠ¨è„šæœ¬ï¼š

```bash
./scripts/start.sh
```

æˆ–è€…æ‰‹åŠ¨å¯åŠ¨ï¼š

```bash
# æ•°æ®åº“è¿ç§»
alembic upgrade head

# å¯åŠ¨åº”ç”¨
uvicorn src.main:app --reload
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
LLM-learn/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ config.py      # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ database.py    # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ logging.py     # æ—¥å¿—é…ç½®
â”‚   â”‚   â”œâ”€â”€ security.py    # å®‰å…¨è®¤è¯
â”‚   â”‚   â””â”€â”€ cache.py       # ç¼“å­˜ç®¡ç†
â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”‚   â””â”€â”€ v1/            # APIç‰ˆæœ¬
â”‚   â”‚       â””â”€â”€ endpoints/ # APIç«¯ç‚¹
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ main.py            # åº”ç”¨å…¥å£
â”œâ”€â”€ tests/                 # æµ‹è¯•ç›®å½•
â”œâ”€â”€ migrations/            # æ•°æ®åº“è¿ç§»
â”œâ”€â”€ scripts/               # è„šæœ¬ç›®å½•
â”œâ”€â”€ docs/                  # æ–‡æ¡£ç›®å½•
â”œâ”€â”€ docker/                # Dockeré…ç½®
â”œâ”€â”€ pyproject.toml         # é¡¹ç›®é…ç½®
â”œâ”€â”€ alembic.ini           # æ•°æ®åº“è¿ç§»é…ç½®
â”œâ”€â”€ docker-compose.yml    # Dockerç¼–æ’
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹å·¥å…·ç¡®ä¿ä»£ç è´¨é‡ï¼š

- **Black**: ä»£ç æ ¼å¼åŒ–
- **isort**: å¯¼å…¥æ’åº
- **flake8**: ä»£ç æ£€æŸ¥
- **mypy**: ç±»å‹æ£€æŸ¥
- **pytest**: å•å…ƒæµ‹è¯•

è¿è¡Œä»£ç æ£€æŸ¥ï¼š

```bash
# æ ¼å¼åŒ–ä»£ç 
black src tests
isort src tests

# ä»£ç æ£€æŸ¥
flake8 src tests
mypy src

# è¿è¡Œæµ‹è¯•
pytest --cov=src
```

### é¢„æäº¤é’©å­

å®‰è£…é¢„æäº¤é’©å­ï¼š

```bash
pre-commit install
```

è¿™å°†è‡ªåŠ¨åœ¨æ¯æ¬¡æäº¤å‰è¿è¡Œä»£ç æ£€æŸ¥ã€‚

### æ•°æ®åº“è¿ç§»

åˆ›å»ºæ–°çš„è¿ç§»ï¼š

```bash
alembic revision --autogenerate -m "æè¿°å˜æ›´"
```

åº”ç”¨è¿ç§»ï¼š

```bash
alembic upgrade head
```

å›æ»šè¿ç§»ï¼š

```bash
alembic downgrade -1
```

## ğŸ³ Dockeréƒ¨ç½²

### ä½¿ç”¨Docker Compose

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f app

# åœæ­¢æœåŠ¡
docker-compose down
```

### æ„å»ºé•œåƒ

```bash
docker build -t llm-learn .
docker run -p 8000:8000 llm-learn
```

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### åº”ç”¨ç›‘æ§

- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health
- **è¯¦ç»†å¥åº·æ£€æŸ¥**: http://localhost:8000/health/detailed
- **PrometheusæŒ‡æ ‡**: http://localhost:8000/metrics
- **APIæ–‡æ¡£**: http://localhost:8000/docs

### æ—¥å¿—é…ç½®

é¡¹ç›®ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—ï¼Œæ”¯æŒJSONæ ¼å¼è¾“å‡ºã€‚æ—¥å¿—çº§åˆ«å¯é€šè¿‡ç¯å¢ƒå˜é‡ `LOG_LEVEL` é…ç½®ã€‚

### ç›‘æ§å·¥å…·

- **Prometheus**: æŒ‡æ ‡æ”¶é›† (ç«¯å£ 9090)
- **Grafana**: å¯è§†åŒ–ç›‘æ§ (ç«¯å£ 3000)
- **Flower**: Celeryç›‘æ§ (ç«¯å£ 5555)

## ğŸ” å®‰å…¨é…ç½®

### ç¯å¢ƒå˜é‡

é‡è¦çš„å®‰å…¨é…ç½®ï¼š

```bash
# å¯†é’¥é…ç½®
SECRET_KEY=your-secret-key-here
JWT_SECRET_KEY=your-jwt-secret-key-here

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://user:password@localhost:5432/llm_learn

# Redisé…ç½®
REDIS_URL=redis://localhost:6379/0

# å¤–éƒ¨APIå¯†é’¥
OPENAI_API_KEY=your-openai-api-key
ANTHROPIC_API_KEY=your-anthropic-api-key
```

### å®‰å…¨æœ€ä½³å®è·µ

1. æ°¸è¿œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æ•æ„Ÿä¿¡æ¯
2. ä½¿ç”¨å¼ºå¯†ç å’Œå¯†é’¥
3. å®šæœŸè½®æ¢å¯†é’¥
4. å¯ç”¨HTTPS
5. é…ç½®CORSç­–ç•¥
6. ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†é…ç½®

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=src --cov-report=html

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_api.py -v

# è¿è¡Œæ ‡è®°çš„æµ‹è¯•
pytest -m "not slow"
```

### æµ‹è¯•ç±»å‹

- **å•å…ƒæµ‹è¯•**: æµ‹è¯•å•ä¸ªå‡½æ•°æˆ–ç±»
- **é›†æˆæµ‹è¯•**: æµ‹è¯•ç»„ä»¶é—´çš„äº¤äº’
- **ç«¯åˆ°ç«¯æµ‹è¯•**: æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜ç­–ç•¥

- ä½¿ç”¨Redisç¼“å­˜çƒ­ç‚¹æ•°æ®
- å®ç°ç¼“å­˜è£…é¥°å™¨
- è®¾ç½®åˆç†çš„ç¼“å­˜è¿‡æœŸæ—¶é—´

### æ•°æ®åº“ä¼˜åŒ–

- ä½¿ç”¨è¿æ¥æ± 
- åˆ›å»ºé€‚å½“çš„ç´¢å¼•
- ä¼˜åŒ–æŸ¥è¯¢è¯­å¥
- ä½¿ç”¨å¼‚æ­¥æ“ä½œ

### å¼‚æ­¥å¤„ç†

- ä½¿ç”¨Celeryå¤„ç†è€—æ—¶ä»»åŠ¡
- å®ç°å¼‚æ­¥APIç«¯ç‚¹
- ä½¿ç”¨å¼‚æ­¥æ•°æ®åº“æ“ä½œ

## ğŸš€ éƒ¨ç½²

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

1. **ç¯å¢ƒå‡†å¤‡**
   ```bash
   export ENVIRONMENT=production
   export DEBUG=false
   ```

2. **æ•°æ®åº“è¿ç§»**
   ```bash
   alembic upgrade head
   ```

3. **å¯åŠ¨åº”ç”¨**
   ```bash
   uvicorn src.main:app --host 0.0.0.0 --port 8000 --workers 4
   ```

### ä½¿ç”¨Gunicorn

```bash
gunicorn src.main:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8000
```

### ä½¿ç”¨Nginx

é…ç½®Nginxåå‘ä»£ç†ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥æ•°æ®åº“æœåŠ¡æ˜¯å¦è¿è¡Œ
   - éªŒè¯è¿æ¥å­—ç¬¦ä¸²
   - ç¡®è®¤æ•°æ®åº“ç”¨æˆ·æƒé™

2. **Redisè¿æ¥å¤±è´¥**
   - æ£€æŸ¥RedisæœåŠ¡çŠ¶æ€
   - éªŒè¯Redisé…ç½®
   - ç¡®è®¤ç½‘ç»œè¿æ¥

3. **ä¾èµ–å®‰è£…å¤±è´¥**
   - æ›´æ–°pipç‰ˆæœ¬
   - æ£€æŸ¥Pythonç‰ˆæœ¬å…¼å®¹æ€§
   - æ¸…ç†ç¼“å­˜é‡æ–°å®‰è£…

4. **ç«¯å£è¢«å ç”¨**
   - æ£€æŸ¥ç«¯å£ä½¿ç”¨æƒ…å†µ
   - ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£
   - åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡

### æ—¥å¿—åˆ†æ

æŸ¥çœ‹åº”ç”¨æ—¥å¿—ï¼š

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/app.log

# æœç´¢é”™è¯¯æ—¥å¿—
grep ERROR logs/app.log

# åˆ†ææ—¥å¿—ç»Ÿè®¡
cat logs/app.log | jq '.level' | sort | uniq -c
```

## ğŸ“š æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„APIç«¯ç‚¹

1. åœ¨ `src/api/v1/endpoints/` åˆ›å»ºæ–°çš„ç«¯ç‚¹æ–‡ä»¶
2. å®šä¹‰è·¯ç”±å’Œä¸šåŠ¡é€»è¾‘
3. åœ¨ `src/api/v1/__init__.py` ä¸­æ³¨å†Œè·¯ç”±
4. ç¼–å†™ç›¸åº”çš„æµ‹è¯•

### æ·»åŠ æ–°çš„æ•°æ®æ¨¡å‹

1. åœ¨ `src/models/` åˆ›å»ºæ¨¡å‹æ–‡ä»¶
2. å®šä¹‰SQLAlchemyæ¨¡å‹å’ŒPydanticæ¨¡å¼
3. åˆ›å»ºæ•°æ®åº“è¿ç§»
4. å®ç°CRUDæ“ä½œ

### æ·»åŠ æ–°çš„æœåŠ¡

1. åœ¨ `src/services/` åˆ›å»ºæœåŠ¡æ–‡ä»¶
2. å®ç°ä¸šåŠ¡é€»è¾‘
3. æ·»åŠ ä¾èµ–æ³¨å…¥
4. ç¼–å†™å•å…ƒæµ‹è¯•

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

### æäº¤è§„èŒƒ

ä½¿ç”¨çº¦å®šå¼æäº¤ï¼š

```
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ›´æ–°æ–‡æ¡£
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æ·»åŠ æµ‹è¯•
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼š

1. æŸ¥çœ‹æœ¬æ–‡æ¡£
2. æœç´¢Issues
3. åˆ›å»ºæ–°çš„Issue
4. è”ç³»ç»´æŠ¤å›¢é˜Ÿ

---

æ„Ÿè°¢ä½¿ç”¨LLM-Learnä¼ä¸šçº§é¡¹ç›®æ¡†æ¶ï¼ 