# LLM-learn 项目使用指南

## 🎯 项目概述

LLM-learn 是一个模块化的学习项目框架，专为学习 LLM 应用开发而设计。项目采用企业级目录结构，支持快速添加新的学习模块。

## 📁 项目结构

```
LLM-learn/
├── src/                   # 源代码目录
│   ├── core/              # 核心模块
│   │   ├── base_app.py    # 应用基类
│   │   └── app_manager.py # 应用管理器
│   ├── apps/              # 应用模块
│   │   ├── logging_demo.py    # 日志演示
│   │   ├── gradio_demo.py     # Gradio 演示
│   │   ├── llm_app_demo.py    # LLM 演示
│   │   └── testapp_app.py     # 测试应用（示例）
│   ├── utils/             # 工具模块
│   │   └── logger_utils.py    # 日志工具
│   ├── demos/             # 演示模块
│   │   ├── helloworld.py      # Hello World
│   │   ├── import_examples.py # 导入示例
│   │   └── example_with_logging.py # 日志示例
│   └── main.py            # 主程序入口
├── config/                # 配置文件目录
│   └── logging_demo.json  # 日志演示配置
├── scripts/               # 脚本目录
├── docs/                  # 文档目录
├── tests/                 # 测试目录
├── logs/                  # 日志文件目录
├── requirements.txt       # 项目依赖
├── setup.py              # 项目安装配置
├── pyproject.toml        # 现代 Python 项目配置
├── Makefile              # 项目管理命令
└── README.md             # 项目说明文档
```

## 🚀 快速开始

### 1. 环境准备

```bash
# 激活虚拟环境
source /Users/zhangzhongyuan/PycharmProjects/venv/bin/activate

# 安装项目依赖
pip install -r requirements.txt
```

### 2. 查看可用应用

```bash
# 列出所有可用的学习模块
python src/main.py list
```

### 3. 运行应用

```bash
# 运行日志演示
python src/main.py run LoggingDemoApp

# 运行 Gradio 演示
python src/main.py run GradioApp

# 运行 LLM 演示
python src/main.py run LLMApp
```

## 🛠️ 添加新的学习模块

### 方法一：使用命令行工具（推荐）

```bash
# 创建新的 Gradio 应用
python src/main.py create MyLearningApp gradio

# 创建新的控制台应用
python src/main.py create MyLearningApp console
```

### 方法二：手动创建

1. 在 `src/apps/` 目录下创建新的 Python 文件
2. 继承相应的基类
3. 实现必要的方法

#### Gradio 应用模板

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
我的学习模块
"""

import gradio as gr
from core.base_app import GradioApp
from typing import Dict, Any

class MyApp(GradioApp):
    """我的应用"""
    
    def __init__(self):
        super().__init__(
            name="my_app",
            description="我的学习模块",
            port=7863
        )
    
    def get_info(self) -> Dict[str, Any]:
        """获取应用信息"""
        return {
            "name": self.name,
            "description": self.description,
            "version": "1.0.0",
            "type": "gradio"
        }
    
    def create_interface(self):
        """创建 Gradio 界面"""
        with gr.Blocks(title="我的学习模块") as interface:
            gr.Markdown("# 我的学习模块")
            
            with gr.Row():
                with gr.Column():
                    input_text = gr.Textbox(
                        label="输入",
                        placeholder="请输入内容..."
                    )
                    submit_btn = gr.Button("提交")
                
                with gr.Column():
                    output_text = gr.Textbox(
                        label="输出",
                        interactive=False
                    )
            
            def process_input(text):
                # 在这里实现您的业务逻辑
                return f"处理结果: {text}"
            
            submit_btn.click(
                fn=process_input,
                inputs=[input_text],
                outputs=[output_text]
            )
        
        return interface

# 应用实例
app = MyApp()

if __name__ == "__main__":
    app.run()
```

#### 控制台应用模板

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
我的控制台应用
"""

from core.base_app import ConsoleApp
from typing import Dict, Any

class MyConsoleApp(ConsoleApp):
    """我的控制台应用"""
    
    def __init__(self):
        super().__init__(
            name="my_console_app",
            description="我的控制台应用"
        )
    
    def get_info(self) -> Dict[str, Any]:
        """获取应用信息"""
        return {
            "name": self.name,
            "description": self.description,
            "version": "1.0.0",
            "type": "console"
        }
    
    def run_console(self, **kwargs):
        """控制台应用的主要逻辑"""
        self.logger.info("开始运行我的控制台应用")
        
        # 在这里实现您的业务逻辑
        print("欢迎使用我的控制台应用!")
        
        # 示例：交互式输入
        user_input = input("请输入一些内容: ")
        print(f"您输入的内容是: {user_input}")
        
        self.logger.info("应用运行完成")

# 应用实例
app = MyConsoleApp()

if __name__ == "__main__":
    app.run()
```

## 📋 可用命令

### 主程序命令

```bash
# 列出所有应用
python src/main.py list

# 运行指定应用
python src/main.py run <应用名称>
python src/main.py run <应用名称> --port <端口号>

# 创建新应用
python src/main.py create <应用名称> <应用类型>
# 应用类型: gradio, console

# 查看应用信息
python src/main.py info <应用名称>
```

### Makefile 命令

```bash
# 查看所有可用命令
make help

# 安装项目依赖
make install

# 安装开发依赖
make install-dev

# 运行应用
make run-gradio    # 运行 Gradio 演示
make run-llm       # 运行 LLM 演示
make run-logging   # 运行日志演示
make run-example   # 运行日志示例

# 应用管理
make list-apps     # 列出所有应用
make create-app    # 创建新应用模板

# 代码质量
make format        # 代码格式化
make lint          # 代码检查
make test          # 运行测试
make clean         # 清理临时文件
```

## 🔧 配置管理

### 应用配置文件

每个应用可以有自己的配置文件，放在 `config/` 目录下：

```json
{
    "app": {
        "name": "my_app",
        "description": "我的应用",
        "version": "1.0.0"
    },
    "logging": {
        "level": "INFO",
        "format": "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
    },
    "gradio": {
        "port": 7863,
        "share": false,
        "debug": true
    }
}
```

### 环境变量

```bash
# 设置日志级别
export LOG_LEVEL=DEBUG

# 设置应用端口
export APP_PORT=7863
```

## 📚 学习要点

### 1. 应用基类

- `BaseApp`: 所有应用的基类
- `GradioApp`: Gradio 应用的基类
- `ConsoleApp`: 控制台应用的基类

### 2. 应用管理器

- 自动发现和注册应用
- 统一的应用管理接口
- 支持动态加载应用

### 3. 日志系统

- 统一的日志配置
- 支持多种日志处理器
- 结构化日志记录

### 4. 模块化设计

- 清晰的目录结构
- 可扩展的架构
- 易于维护和扩展

## 🎯 最佳实践

### 1. 应用开发

- 继承合适的基类
- 实现必要的方法
- 添加适当的文档
- 使用类型注解

### 2. 配置管理

- 使用配置文件管理设置
- 支持环境变量覆盖
- 提供合理的默认值

### 3. 错误处理

- 使用 try-catch 处理异常
- 记录详细的错误信息
- 提供用户友好的错误消息

### 4. 日志记录

- 使用适当的日志级别
- 记录关键操作信息
- 避免记录敏感数据

## 🔗 相关资源

- [Python 官方文档](https://docs.python.org/)
- [Gradio 官方文档](https://gradio.app/docs/)
- [Python 日志模块](https://docs.python.org/3/library/logging.html)
- [项目 GitHub 仓库](https://github.com/zhangzhongyuan/LLM-learn)

## 📞 支持

如果您在使用过程中遇到问题，可以：

1. 查看项目文档
2. 检查日志文件
3. 提交 Issue
4. 联系项目维护者

---

**创建时间：** 2024年12月
**版本：** 1.0.0
**作者：** Zhang Zhongyuan 